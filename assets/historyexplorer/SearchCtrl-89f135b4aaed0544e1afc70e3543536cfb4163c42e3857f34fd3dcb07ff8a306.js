graphApp.controller("SearchCtrl",["$scope","$element","GraphData",function(e,t,n){function o(e){e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation&&(e.stopPropagation(),e.preventDefault())}var c=6,i=new Bloodhound({limit:c,local:n.nodes(),datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.title)},queryTokenizer:Bloodhound.tokenizers.whitespace});i.initialize().done(function(){e.ready=!0}),e.$on("keypress",function(e,n){(47==n.which||(n.metaKey||n.ctrlKey)&&102==n.which)&&(o(n),t.find("input").focus())}),e.matches=[],e.$watch("searchQuery",function(t){e.ready&&i.get(t,function(t){e.matches=t,e.selectedResult=0})}),n.on("select.node",function(){e.matches=[],t.find("input").blur()}),e.clear=function(t){setTimeout(function(){e.matches=[],e.searchQuery=""},t||0)},e.goTo=function(t){e.clear(),n.emit("select.node",t)},e.searchKey=function(t){if(40==t.which||0==t.which)t.preventDefault(),t.stopPropagation(),e.selectedResult=Math.min(e.selectedResult+1,e.matches.length-1);else if(38==t.which)t.preventDefault(),t.stopPropagation(),e.selectedResult=Math.max(0,e.selectedResult-1);else if(13==t.which&&e.selectedResult>-1){t.preventDefault(),t.stopPropagation();var n=e.matches[e.selectedResult].id;e.goTo(n)}}}]);